(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{29273:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ra});var s=t(95155),a=t(12115),n=t(50172),o=t(33349),l=t(17104),i=t(87481),d=t(3925),c=t(30285),u=t(59434),m=t(59576),x=t(34477);let h=(0,x.createServerReference)("40e6e3bfee91d4d3ac89da9eb4eba2f2deacd35796",x.callServer,void 0,x.findSourceMapURL,"generateSlidesAction"),p=(0,x.createServerReference)("4039af7940d24e8d9be09071c5a920820b7b338c8c",x.callServer,void 0,x.findSourceMapURL,"summarizeSlidesAction"),g=(0,x.createServerReference)("40763da508b77eae95e5f367ebadca3fe2a84659be",x.callServer,void 0,x.findSourceMapURL,"generateVideoAction");var f=t(74601),b=t(31550),v=t(73503),j=t(45481),y=t(49502);let N=e=>{let{icon:r,title:t,description:a}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center p-4 rounded-lg bg-card/30 backdrop-blur-sm border border-primary/10 shadow-lg transition-transform duration-300 hover:scale-105 hover:border-primary/30 h-full",children:[(0,s.jsx)(r,{className:"w-10 h-10 text-primary mb-3"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-1 text-foreground text-center",children:t}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:a})]})};function w(e){let{onStart:r}=e;return(0,s.jsx)("div",{className:"relative flex flex-col items-center justify-center w-full min-h-[calc(100vh-4rem)] text-center p-4 md:p-6 lg:p-8 animate-fade-in",children:(0,s.jsxs)("div",{className:"relative z-10 max-w-4xl w-full",children:[(0,s.jsx)(f.A,{className:"w-12 md:w-16 h-12 md:h-16 text-primary mb-4 mx-auto animate-pulse-glow"}),(0,s.jsx)("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-bold mb-4 text-primary header-glow",children:"Welcome to TraiHVail"}),(0,s.jsx)("p",{className:"text-base md:text-xl text-muted-foreground mb-8 md:mb-10 max-w-2xl mx-auto",children:"Your intelligent assistant for practice-based technical learning. Upload your course, get interactive slides, video summaries, and AI tutoring!"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-10 md:mb-12",children:[(0,s.jsx)(N,{icon:b.A,title:"Interactive Slides",description:"Generate engaging slides from your course structure automatically."}),(0,s.jsx)(N,{icon:v.A,title:"AI Tutoring",description:"Get personalized help and guidance from our AI assistant, Rookie & Pookie."}),(0,s.jsx)(N,{icon:j.A,title:"Video Summaries",description:"Create concise video overviews of your lessons with AI voiceover."})]}),(0,s.jsxs)(c.$,{onClick:r,size:"lg",className:"relative overflow-hidden group bg-primary text-primary-foreground hover:bg-primary/90 transition-all duration-300 ease-in-out shadow-lg hover:shadow-primary/40 transform hover:scale-105 active:scale-95 glow-button px-6 py-3 md:px-8 md:py-6 text-base md:text-lg",children:[(0,s.jsx)("div",{className:"radar-spinner group-hover:animate-radar-spin"}),(0,s.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,s.jsx)(y.A,{className:"w-5 h-5 transition-transform duration-300 group-hover:translate-x-1 group-hover:animate-rocket-takeoff-button"}),"Unstop Learn"]})]})]})})}var S=t(62177),k=t(90221),C=t(55594);let A=a.forwardRef((e,r)=>{let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,u.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200 ease-in-out","shadow-inner bg-opacity-80 backdrop-blur-sm",t),ref:r,...n})});A.displayName="Input";let E=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,u.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});E.displayName="Card";let _=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,u.cn)("flex flex-col space-y-1.5 p-6",t),...a})});_.displayName="CardHeader";let L=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,u.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});L.displayName="CardTitle";let R=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,u.cn)("text-sm text-muted-foreground",t),...a})});R.displayName="CardDescription";let I=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,u.cn)("p-6 pt-0",t),...a})});I.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,u.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter";var F=t(99708),T=t(40968);let z=(0,t(74466).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-foreground"),D=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(T.b,{ref:r,className:(0,u.cn)(z(),t),...a})});D.displayName=T.b.displayName;let M=S.Op,P=a.createContext({}),V=e=>{let{...r}=e;return(0,s.jsx)(P.Provider,{value:{name:r.name},children:(0,s.jsx)(S.xI,{...r})})},G=()=>{let e=a.useContext(P),r=a.useContext(U),{getFieldState:t,formState:s}=(0,S.xW)(),n=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},U=a.createContext({}),$=a.forwardRef((e,r)=>{let{className:t,...n}=e,o=a.useId();return(0,s.jsx)(U.Provider,{value:{id:o},children:(0,s.jsx)("div",{ref:r,className:(0,u.cn)("space-y-2",t),...n})})});$.displayName="FormItem";let W=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:n,formItemId:o}=G();return(0,s.jsx)(D,{ref:r,className:(0,u.cn)(n&&"text-destructive",t),htmlFor:o,...a})});W.displayName="FormLabel";let O=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:n,formDescriptionId:o,formMessageId:l}=G();return(0,s.jsx)(F.DX,{ref:r,id:n,"aria-describedby":a?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!a,...t})});O.displayName="FormControl";let B=a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:n}=G();return(0,s.jsx)("p",{ref:r,id:n,className:(0,u.cn)("text-sm text-muted-foreground",t),...a})});B.displayName="FormDescription";let H=a.forwardRef((e,r)=>{var t;let{className:a,children:n,...o}=e,{error:l,formMessageId:i}=G(),d=l?String(null!=(t=null==l?void 0:l.message)?t:""):n;return d?(0,s.jsx)("p",{ref:r,id:i,className:(0,u.cn)("text-sm font-medium text-destructive",a),...o,children:d}):null});H.displayName="FormMessage";var q=t(12543);let J=C.z.object({fullName:C.z.string().min(3,{message:"Full name must be at least 3 characters."}).max(100),password:C.z.string().min(6,{message:"Password must be at least 6 characters."})});function K(e){let{onLoginSuccess:r,onBack:t}=e,{login:o}=(0,a.useContext)(m.c),{toast:d}=(0,i.dj)(),[u,x]=(0,a.useState)(!1),h=(0,S.mN)({resolver:(0,k.u)(J),defaultValues:{fullName:"",password:""},mode:"onChange"}),p=async e=>{x(!0);try{await o(e.fullName,e.password),d({title:"Login Successful",description:"Welcome back, ".concat(e.fullName.split(" ")[0],"!")}),r()}catch(e){console.error("Login failed:",e),d({title:"Login Failed",description:e instanceof Error?e.message:"An unexpected error occurred during login.",variant:"destructive"})}finally{x(!1)}};return(0,s.jsxs)(E,{className:"w-full max-w-md bg-card/80 backdrop-blur-md border-primary/20 shadow-xl animate-fade-in transform-style-3d transition-transform duration-500 hover:scale-[1.01] hover:rotate-x-1",children:[(0,s.jsxs)(_,{className:"pb-4",children:[(0,s.jsxs)(L,{className:"flex items-center justify-between text-2xl text-primary header-glow",children:["Login to TraiHVail",(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Go back",className:"text-muted-foreground hover:text-primary",children:(0,s.jsx)(q.A,{className:"w-5 h-5"})})]}),(0,s.jsx)(R,{className:"text-muted-foreground pt-1 text-base",children:"Enter your details to access your learning journey."})]}),(0,s.jsx)(I,{children:(0,s.jsx)(M,{...h,children:(0,s.jsxs)("form",{onSubmit:h.handleSubmit(p),className:"space-y-6",children:[(0,s.jsx)(V,{control:h.control,name:"fullName",render:e=>{let{field:r}=e;return(0,s.jsxs)($,{children:[(0,s.jsx)(W,{className:"text-foreground text-base",children:"Full Name"}),(0,s.jsx)(O,{children:(0,s.jsx)(A,{placeholder:"e.g., Ada Lovelace",...r,className:"bg-input/80 border-input focus:border-primary text-base",disabled:u})}),(0,s.jsx)(H,{})]})}}),(0,s.jsx)(V,{control:h.control,name:"password",render:e=>{let{field:r}=e;return(0,s.jsxs)($,{children:[(0,s.jsx)(W,{className:"text-foreground text-base",children:"Password"}),(0,s.jsx)(O,{children:(0,s.jsx)(A,{type:"password",placeholder:"Enter your password",...r,className:"bg-input/80 border-input focus:border-primary text-base",disabled:u})}),(0,s.jsx)(H,{})]})}}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(c.$,{type:"submit",className:"glow-button relative overflow-hidden group",disabled:u||!h.formState.isValid,children:(0,s.jsxs)("span",{className:"relative z-10 flex items-center",children:[u?(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4"}),u?"Logging in...":"Login"]})})})]})})})]})}function X(e){let{onLoginSuccess:r,onBack:t}=e;return(0,s.jsx)(K,{onLoginSuccess:r,onBack:t})}function Y(){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-[85vh] text-center p-6 animate-fade-in",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,s.jsx)(y.A,{className:"w-24 h-24 text-primary animate-rocket-launch-fullscreen"})}),(0,s.jsx)("p",{className:"text-lg text-muted-foreground mt-32 animate-fade-in-delay",children:"Powering up TraiHVail... engaging AI protocols..."})]})}var Z=t(8376),Q=t(16923),ee=t(60679);let er=C.z.object({courseName:C.z.string().min(3,{message:"Course name must be at least 3 characters long."}).max(100,{message:"Course name cannot exceed 100 characters."}),courseFile:C.z.any().refine(e=>e instanceof FileList&&e.length>0,"Course structure file is required.").refine(e=>e instanceof FileList&&e.length>0&&("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e[0].type||"application/vnd.ms-excel"===e[0].type||"text/csv"===e[0].type||"application/csv"===e[0].type||e[0].name.toLowerCase().endsWith(".csv")),"File must be an Excel (.xlsx, .xls) or CSV (.csv).").refine(e=>e instanceof FileList&&e.length>0&&e[0].size<=5242880,"File size must be less than 5MB.").nullable()});function et(e){let{onSubmit:r,onBack:t}=e,a=(0,S.mN)({resolver:(0,k.u)(er),defaultValues:{courseName:"",courseFile:null},mode:"onChange"}),o=a.register("courseFile"),l=a.watch("courseFile"),i=l instanceof FileList&&l.length>0,d=i?l[0].name:null,m=a.formState.errors.courseFile;return(0,s.jsxs)(E,{className:"w-full max-w-lg bg-card/80 backdrop-blur-md border-primary/20 shadow-xl animate-fade-in transform-style-3d transition-transform duration-500 hover:scale-[1.01] hover:rotate-x-1",children:[(0,s.jsxs)(_,{className:"pb-4",children:[(0,s.jsxs)(L,{className:"flex items-center justify-between text-2xl text-primary header-glow",children:["Setup Your Course",(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Go back",className:"text-muted-foreground hover:text-primary",children:(0,s.jsx)(q.A,{className:"w-5 h-5"})})]}),(0,s.jsxs)(R,{className:"text-muted-foreground pt-1 text-base",children:[" ","Provide a name and upload the course structure (XLSX/XLS/CSV, max 5MB)."]})]}),(0,s.jsx)(I,{children:(0,s.jsx)(M,{...a,children:(0,s.jsxs)("form",{onSubmit:a.handleSubmit(e=>{let t=e.courseFile?e.courseFile[0]:null;r(e.courseName,t)}),className:"space-y-6",children:[(0,s.jsx)(V,{control:a.control,name:"courseName",render:e=>{let{field:r}=e;return(0,s.jsxs)($,{children:[(0,s.jsx)(W,{className:"text-foreground text-base",children:"Course Name"})," ",(0,s.jsx)(O,{children:(0,s.jsx)(A,{placeholder:"e.g., Advanced Python Hashing",...r,className:"bg-input/80 border-input focus:border-primary text-base"})}),(0,s.jsx)(B,{className:"text-xs text-muted-foreground pt-1",children:"A descriptive name for your course."}),(0,s.jsx)(H,{})]})}}),(0,s.jsx)(V,{control:a.control,name:"courseFile",render:e=>{let{field:r}=e;return(0,s.jsxs)($,{children:[(0,s.jsx)(W,{className:"text-foreground text-base",children:"Course Structure File"})," ",(0,s.jsx)(O,{children:(0,s.jsxs)(D,{htmlFor:"courseFile",className:(0,u.cn)("flex flex-col items-center justify-center w-full min-h-[10rem] border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-300","bg-muted/30 border-border hover:bg-muted/50 hover:border-primary/50",i&&!m&&"border-green-500/70 bg-green-500/10 hover:bg-green-500/20",m&&"border-destructive/70 bg-destructive/10 hover:bg-destructive/20"),children:[(0,s.jsx)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-center",children:i&&!m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.A,{className:"w-10 h-10 mb-3 text-green-500"}),(0,s.jsx)("p",{className:"mb-1 text-sm font-semibold text-foreground",children:"File Ready:"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate max-w-[90%]",children:d})]}):m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q.A,{className:"w-8 h-8 mb-3 text-destructive"}),(0,s.jsx)("p",{className:"mb-1 text-sm font-semibold text-destructive",children:"Upload Issue"}),(0,s.jsx)("p",{className:"text-xs text-destructive/90 px-4",children:"string"==typeof m.message?m.message:"Invalid file selected."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q.A,{className:"w-8 h-8 mb-3 text-muted-foreground group-hover:text-primary"}),(0,s.jsxs)("p",{className:"mb-1 text-sm text-muted-foreground",children:[(0,s.jsx)("span",{className:"font-semibold text-foreground",children:"Click to upload"})," or drag & drop"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Excel (.xlsx, .xls) or CSV (.csv, max 5MB) "})]})}),(0,s.jsx)(A,{id:"courseFile",type:"file",className:"hidden",accept:".xlsx, .xls, .csv",...o})]})}),(0,s.jsxs)(B,{className:"text-xs text-muted-foreground pt-1",children:["Must contain columns: ",(0,s.jsx)("code",{className:"font-mono text-xs bg-muted px-1 py-0.5 rounded",children:"Content"}),", ",(0,s.jsx)("code",{className:"font-mono text-xs bg-muted px-1 py-0.5 rounded",children:"Type"})," ('Module' or 'Sub Module'), ",(0,s.jsx)("code",{className:"font-mono text-xs bg-muted px-1 py-0.5 rounded",children:"Details"})," (optional). First row must be headers."]}),(0,s.jsx)(H,{})," "]})}}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsxs)(c.$,{type:"submit",className:"glow-button relative overflow-hidden group",disabled:a.formState.isSubmitting||!a.formState.isValid,children:[(0,s.jsxs)("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:[(0,s.jsx)("span",{className:"absolute inset-0 translate-x-0 translate-y-0 bg-primary transition-transform duration-500 ease-out group-hover:translate-x-full group-hover:translate-y-full"}),(0,s.jsx)("span",{className:"absolute inset-0 translate-x-full translate-y-full bg-primary/80 transition-transform duration-500 ease-out group-hover:translate-x-0 group-hover:translate-y-0"})]}),(0,s.jsxs)("span",{className:"relative z-10 flex items-center",children:[a.formState.isSubmitting?(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(ee.A,{className:"mr-2 h-4 w-4"}),a.formState.isSubmitting?"Parsing...":"Parse & Proceed"]})]})})]})})})]})}function es(e){let{onSubmit:r,onBack:t}=e;return(0,s.jsx)(et,{onSubmit:r,onBack:t})}var ea=t(77724),en=t(67333);function eo(e){let{courseName:r,duration:t,loadingText:o="Processing...",itemCount:l,countdownDuration:i}=e,[d,c]=(0,a.useState)(i);(0,a.useEffect)(()=>{if(i&&i>0){c(i);let e=setInterval(()=>{c(r=>null===r||r<=1?(clearInterval(e),0):r-1)},1e3);return()=>clearInterval(e)}c(null)},[i]);let u=null!==d?d:l,m=null==u||void 0===i;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-[85vh] text-center p-6 animate-fade-in",children:[(0,s.jsxs)("div",{className:"relative w-64 h-64 mb-8",children:[(0,s.jsx)("div",{className:"absolute inset-0 border-4 border-primary/30 rounded-full animate-spin animation-duration-3s"}),(0,s.jsx)("div",{className:"absolute inset-4 border-2 border-primary/50 rounded-full animate-pulse animation-delay-100ms"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:m?(0,s.jsx)(ea.A,{className:"w-24 h-24 text-primary animate-pulse-glow animation-duration-2s"}):(0,s.jsxs)("span",{className:"text-6xl font-bold text-primary animate-pulse-glow animation-duration-2s tabular-nums",children:[u,null!==d&&null!==i&&"s"]})}),(0,s.jsx)(en.A,{className:"absolute w-8 h-8 text-accent top-0 left-1/2 transform -translate-x-1/2 -translate-y-4 animate-orbit",style:{animationDuration:"8s",animationDelay:"0s"}}),(0,s.jsx)(n.A,{className:"absolute w-8 h-8 text-accent bottom-0 left-1/2 transform -translate-x-1/2 translate-y-4 animate-orbit animation-reverse",style:{animationDuration:"6s",animationDelay:"-2s"}})]}),(0,s.jsx)("h2",{className:"text-2xl md:text-3xl font-semibold text-primary mb-2 header-glow",children:o}),(0,s.jsxs)("p",{className:"text-lg text-muted-foreground mb-4",children:["Processing: ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:r})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:"Engaging AI protocols... mapping learning pathways... (This might take a moment)"})]})}function el(e){let{courseName:r}=e;return(0,s.jsx)(eo,{courseName:r,loadingText:"Parsing course file..."})}var ei=t(70154),ed=t(79556),ec=t(23478);let eu=ec.bL,em=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(ec.q7,{ref:r,className:(0,u.cn)("border-b border-border/30 last:border-b-0",t),...a})});em.displayName="AccordionItem";let ex=a.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsx)(ec.Y9,{className:"flex",children:(0,s.jsx)(ec.l9,{ref:r,className:(0,u.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg.accordion-chevron]:rotate-180",t),...n,children:a})})});ex.displayName=ec.l9.displayName;let eh=a.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsx)(ec.UC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,s.jsx)("div",{className:(0,u.cn)("pb-4 pt-2",t),children:a})})});function ep(e){let{courseName:r,modules:t,onStartLesson:n,onBack:o}=e,l=(0,a.useMemo)(()=>{let e=t.find(e=>"Module"===e.type);return e?[e.id]:[]},[t]),[i,d]=(0,a.useState)(l),m=(0,a.useMemo)(()=>{let e=[],r=null;return t.forEach(t=>{"Module"===t.type?(r&&e.push(r),r={...t,subModules:[]}):"Sub Module"===t.type&&r?r.subModules.push(t):"Sub Module"!==t.type||r||console.warn("Orphaned Sub Module found: ".concat(t.content,". Place it under a 'Module' type."))}),r&&e.push(r),console.log("Grouped Structure:",e),e},[t]),x=e=>(0,s.jsx)("div",{className:"p-4 space-y-2",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(y.A,{className:"w-5 h-5 text-primary/80 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("p",{className:"font-semibold text-foreground text-base",children:[e.content," "]})]}),e.details&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground pl-8",children:e.details})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2 flex-shrink-0 w-32",children:[" ",e.completed?(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-green-500 text-xs font-medium",children:[(0,s.jsx)(Z.A,{className:"w-4 h-4"}),"Completed"]}):(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground text-xs font-medium",children:[(0,s.jsx)(ei.A,{className:"w-4 h-4"}),"Pending"]}),(0,s.jsx)(c.$,{onClick:()=>n(e),variant:e.completed?"outline":"default",size:"sm",className:(0,u.cn)("w-full group",!e.completed&&"glow-button relative overflow-hidden"),children:(0,s.jsxs)("span",{className:"relative z-10 flex items-center justify-center",children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4 transition-transform duration-300 group-hover:scale-110"})," ",e.completed?"Review":"Start"," "]})})]})]})});return(0,s.jsxs)("div",{className:"w-full max-w-3xl animate-fade-in p-4",children:[" ",(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-card/80 backdrop-blur-md py-3 px-4 z-10 rounded-t-lg border-b border-border/30",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-primary header-glow",children:r}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:o,"aria-label":"Go back",className:"text-muted-foreground hover:text-primary",children:(0,s.jsx)(q.A,{className:"w-5 h-5"})})})]}),(0,s.jsxs)(eu,{type:"multiple",value:i,onValueChange:d,className:"w-full space-y-4 px-2 pb-4",children:[m.map(e=>(0,s.jsx)(em,{value:e.id,className:"border-none",children:(0,s.jsxs)(E,{className:(0,u.cn)("bg-card/80 backdrop-blur-lg border shadow-lg transition-all duration-300 hover:shadow-primary/20 transform hover:-translate-y-px",e.completed?"border-primary/40":"border-border/30",!e.completed&&"hover:border-primary/50"),children:[(0,s.jsx)(ex,{className:"w-full p-0 hover:no-underline rounded-t-lg focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:(0,s.jsxs)(_,{className:(0,u.cn)("flex flex-row items-center justify-between p-4 rounded-t-lg w-full cursor-pointer",e.completed?"bg-primary/5 border-b border-primary/15":"bg-muted/20 border-b border-border/20"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(b.A,{className:"w-5 h-5 text-primary flex-shrink-0"}),(0,s.jsx)("span",{className:"text-lg font-semibold text-foreground text-left",children:e.content})," "]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)(ed.A,{className:"h-5 w-5 shrink-0 text-muted-foreground transition-transform duration-200 accordion-chevron"})})]})}),(0,s.jsx)(eh,{className:"pt-0",children:e.subModules.length>0?e.subModules.map((e,r)=>(0,s.jsxs)("div",{className:(0,u.cn)("border-t border-border/20",0===r&&"border-t-0"),children:[x(e)," "]},e.id)):(0,s.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground border-t border-border/20",children:"No sub-modules defined for this module."})})]})},e.id)),0===m.length&&t.length>0&&(0,s.jsx)(E,{className:"bg-card/70 backdrop-blur-lg border border-border/30 shadow-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No modules found. Ensure the 'Type' column contains 'Module'."})}),0===t.length&&(0,s.jsx)(E,{className:"bg-card/70 backdrop-blur-lg border border-border/30 shadow-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Course structure is empty or could not be parsed."})})]})]})}eh.displayName=ec.UC.displayName;var eg=t(89051);let ef=a.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsxs)(eg.bL,{ref:r,className:(0,u.cn)("relative overflow-hidden",t),...n,children:[(0,s.jsx)(eg.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,s.jsx)(eb,{}),(0,s.jsx)(eg.OK,{})]})});ef.displayName=eg.bL.displayName;let eb=a.forwardRef((e,r)=>{let{className:t,orientation:a="vertical",...n}=e;return(0,s.jsx)(eg.VM,{ref:r,orientation:a,className:(0,u.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:(0,s.jsx)(eg.lr,{className:"relative flex-1 rounded-full bg-border"})})});function ev(e){let{courseName:r,modules:t,onStartLesson:a,onBack:n}=e;return(0,s.jsx)("div",{className:"h-[calc(100vh-6rem)] w-full",children:(0,s.jsx)(ef,{className:"h-full w-full rounded-lg border border-border/30 bg-card/50 backdrop-blur-sm p-1 shadow-lg",children:(0,s.jsx)(ep,{courseName:r,modules:t,onStartLesson:a,onBack:n})})})}function ej(e){let{courseName:r,lessonName:t}=e,a=t?"".concat(r," - ").concat(t):r;return(0,s.jsx)(eo,{courseName:a,loadingText:"Generating interactive slides..."})}eb.displayName=eg.VM.displayName;var ey=t(67820),eN=t(10518);let ew=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(ey.bL,{ref:r,className:(0,u.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,s.jsx)(ey.C1,{className:(0,u.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(eN.A,{className:"h-4 w-4"})})})});ew.displayName=ey.bL.displayName;var eS=t(83540),ek=t(3401),eC=t(94754),eA=t(96025),eE=t(16238),e_=t(94517),eL=t(83394),eR=t(93504),eI=t(21374),eF=t(8782),eT=t(34e3),ez=t(54811),eD=t(24026);let eM=["#8884d8","#82ca9d","#ffc658","#ff7300","#00C49F","#FFBB28","#FF8042"],eP=e=>{let r=e.data.map((e,r)=>({...e,fill:eM[r%eM.length]}));return(0,s.jsxs)(eS.u,{width:"100%",height:300,children:["bar"===e.chartType&&(0,s.jsxs)(ek.E,{data:r,children:[(0,s.jsx)(eC.d,{strokeDasharray:"3 3",stroke:"hsl(var(--border) / 0.5)"}),(0,s.jsx)(eA.W,{dataKey:"label",stroke:"hsl(var(--foreground) / 0.7)"}),(0,s.jsx)(eE.h,{stroke:"hsl(var(--foreground) / 0.7)"}),(0,s.jsx)(e_.m,{contentStyle:{background:"hsl(var(--popover))",borderColor:"hsl(var(--border))",color:"hsl(var(--popover-foreground))",borderRadius:"var(--radius)"}}),(0,s.jsx)(eL.y,{dataKey:"value",fill:"var(--color-chart-1)"})]}),"line"===e.chartType&&(0,s.jsxs)(eR.b,{data:r,children:[(0,s.jsx)(eC.d,{strokeDasharray:"3 3",stroke:"hsl(var(--border) / 0.5)"}),(0,s.jsx)(eA.W,{dataKey:"label",stroke:"hsl(var(--foreground) / 0.7)"}),(0,s.jsx)(eE.h,{stroke:"hsl(var(--foreground) / 0.7)"}),(0,s.jsx)(e_.m,{contentStyle:{background:"hsl(var(--popover))",borderColor:"hsl(var(--border))",color:"hsl(var(--popover-foreground))",borderRadius:"var(--radius)"}}),(0,s.jsx)(eI.N,{type:"monotone",dataKey:"value",stroke:"var(--color-chart-1)",strokeWidth:2,dot:{r:4,fill:"var(--color-chart-1)"},activeDot:{r:6}})]}),"pie"===e.chartType&&(0,s.jsxs)(eF.r,{children:[(0,s.jsx)(eT.F,{data:r,dataKey:"value",nameKey:"label",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:r.map((e,r)=>(0,s.jsx)(ez.f,{fill:e.fill},"cell-".concat(r)))}),(0,s.jsx)(e_.m,{contentStyle:{background:"hsl(var(--popover))",borderColor:"hsl(var(--border))",color:"hsl(var(--popover-foreground))",borderRadius:"var(--radius)"}}),(0,s.jsx)(eD.s,{})]})]})};function eV(e){let{slides:r}=e;return r&&0!==r.length?(0,s.jsx)("div",{className:"space-y-6 p-4 md:p-6",children:r.map(e=>(0,s.jsxs)(E,{className:(0,u.cn)("bg-card/90 backdrop-blur-lg border border-border/40 shadow-xl overflow-hidden transform transition-all duration-300 hover:shadow-primary/20 hover:border-primary/30 hover:-translate-y-1"),children:[(0,s.jsxs)(_,{className:"pb-4 bg-muted/20 border-b border-border/20",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(L,{className:"text-xl font-semibold text-primary",children:e.title}),(0,s.jsxs)("span",{className:"text-xs font-mono text-muted-foreground px-2 py-1 bg-background/50 rounded border border-border/30",children:["Slide ",e.slideNumber," / ",r.length," (",e.type.replace("_"," "),")"]})]}),"title_slide"===e.type&&e.subtitle&&(0,s.jsx)(R,{className:"text-base text-muted-foreground pt-1",children:e.subtitle})]}),(0,s.jsxs)(I,{className:"pt-6 text-base leading-relaxed",children:["title_slide"===e.type&&(0,s.jsx)("p",{children:e.content}),"content_slide"===e.type&&(0,s.jsx)("p",{children:e.content}),"unordered_list_slide"===e.type&&(0,s.jsx)("ul",{className:"list-disc space-y-2 pl-6",children:e.points.map((e,r)=>(0,s.jsx)("li",{children:e},r))}),"code_slide"===e.type&&(0,s.jsxs)("pre",{className:"bg-muted/50 p-4 rounded-md overflow-x-auto text-sm font-mono border border-border/50 shadow-inner",children:[e.lexer&&(0,s.jsx)("code",{className:"block text-muted-foreground mb-2 text-xs font-semibold",children:e.lexer}),(0,s.jsx)("code",{children:e.code})]}),"quiz_slide"===e.type&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"font-medium text-lg mb-4",children:e.question}),(0,s.jsx)("div",{className:"space-y-3",children:e.options.map((r,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 border border-border/30 rounded-md hover:bg-muted/30 transition-colors",children:[(0,s.jsx)(ew,{id:"option-".concat(e.slideNumber,"-").concat(t)}),(0,s.jsx)(D,{htmlFor:"option-".concat(e.slideNumber,"-").concat(t),className:"flex-1 cursor-pointer",children:r})]},t))})]}),"chart_slide"===e.type&&eP(e),"formula_slide"===e.type&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"text-center text-lg font-medium bg-muted/30 p-4 rounded border border-border/40 shadow-inner font-mono tracking-wider",children:[e.formula," "]}),e.explanation&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground pt-2",children:e.explanation})]}),e.voiceover&&(0,s.jsx)("div",{className:"mt-4 pt-3 border-t border-dashed border-border/30",children:(0,s.jsxs)("p",{className:"text-xs text-muted-foreground italic",children:["\uD83C\uDFA4 ",e.voiceover]})})]})]},e.slideNumber))}):(0,s.jsxs)(E,{className:"m-4 bg-card/80 backdrop-blur-sm border-border/30 shadow-lg",children:[(0,s.jsx)(_,{children:(0,s.jsx)(L,{children:"No Slides Available"})}),(0,s.jsx)(I,{children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Slides could not be generated or are empty."})})]})}var eG=t(75943);function eU(e){let{courseName:r,lessonName:t,slides:a,onBack:n,onEdit:o,onLaunchLearning:l}=e,i=t?"".concat(r," - ").concat(t):r;return(0,s.jsxs)("div",{className:"w-full h-[calc(100vh-6rem)] flex flex-col animate-fade-in bg-card/70 backdrop-blur-md rounded-lg shadow-xl border border-primary/20 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 px-2 pt-2 flex-shrink-0",children:[(0,s.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-primary header-glow",children:i}),(0,s.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:n,children:[(0,s.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Back to Course Structure"]})]}),(0,s.jsx)(ef,{className:"flex-grow mb-4",children:a?(0,s.jsx)(eV,{slides:a}):(0,s.jsx)("p",{children:"Loading slides..."})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-auto pt-4 border-t border-border/30",children:[(0,s.jsx)(c.$,{onClick:o,size:"lg",variant:"outline",className:"relative overflow-hidden group",disabled:!a,children:(0,s.jsxs)("span",{className:"relative z-10 flex items-center",children:[(0,s.jsx)(eG.A,{className:"mr-2 h-5 w-5 group-hover:animate-pulse"}),"Edit Slides"]})}),(0,s.jsxs)(c.$,{onClick:l,size:"lg",className:"glow-button relative overflow-hidden group",disabled:!a,children:[(0,s.jsx)("div",{className:"radar-spinner"}),(0,s.jsxs)("span",{className:"relative z-10 flex items-center",children:[(0,s.jsx)(v.A,{className:"mr-2 h-5 w-5 group-hover:animate-pulse"}),"Let's Learn"]})]})]})]})}let e$=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a})});e$.displayName="Textarea";var eW=t(31949),eO=t(25318);function eB(e){let{initialSlides:r,onSave:t,onCancel:n,courseName:o,lessonName:l}=e,[d,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(!0),{toast:f}=(0,i.dj)();(0,a.useEffect)(()=>{try{m(JSON.stringify({slides:r},null,2)),h(null),g(!0)}catch(e){console.error("Error stringifying initial slides:",e),m("// Error loading slides. Please check the console."),h("Could not load initial slide structure."),g(!1)}},[r]);let b=l?"".concat(o," - ").concat(l):o;return(0,s.jsxs)("div",{className:"w-full h-[calc(100vh-6rem)] flex flex-col animate-fade-in bg-card/70 backdrop-blur-md rounded-lg shadow-xl border border-primary/20 p-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4 px-2 pt-2 flex-shrink-0",children:(0,s.jsxs)("h1",{className:"text-xl md:text-2xl font-bold text-primary header-glow",children:["Edit Slides: ",b]})}),(0,s.jsx)(E,{className:"flex-grow flex flex-col overflow-hidden border-none shadow-none bg-transparent",children:(0,s.jsxs)(I,{className:"flex-grow flex flex-col p-0 relative",children:[x&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 z-10 flex items-center gap-2 bg-destructive/90 text-destructive-foreground p-2 rounded-md text-xs shadow-lg",children:[(0,s.jsx)(eW.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:x})]}),(0,s.jsx)(ef,{className:"flex-grow",children:(0,s.jsx)(e$,{value:d,onChange:e=>{let r=e.target.value;m(r);try{let e=JSON.parse(r);if(e&&Array.isArray(e.slides))h(null),g(!0);else throw Error("Invalid structure: Missing 'slides' array.")}catch(e){h(e instanceof Error?e.message:"Invalid JSON format."),g(!1)}},placeholder:"Enter or paste slide JSON here...",className:(0,u.cn)("w-full h-full min-h-[60vh] resize-none font-mono text-sm p-4 rounded-md","bg-muted/30 border focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary/50",p?"border-border/50":"border-destructive focus:ring-destructive/50 focus:border-destructive/50"),"aria-invalid":!p})})]})}),(0,s.jsxs)("div",{className:"flex justify-end items-center gap-4 mt-4 pt-4 border-t border-border/30 flex-shrink-0",children:[(0,s.jsxs)(c.$,{variant:"outline",onClick:n,size:"lg",className:"flex items-center gap-2",children:[(0,s.jsx)(eO.A,{className:"w-5 h-5"})," Cancel"]}),(0,s.jsxs)(c.$,{onClick:()=>{if(!p)return void f({title:"Validation Error",description:"Cannot save, the JSON is invalid.",variant:"destructive"});try{let e=JSON.parse(d);if(e&&Array.isArray(e.slides))t(e.slides);else throw Error("Invalid structure after parsing: Missing 'slides' array.")}catch(e){console.error("Error saving edited slides:",e),f({title:"Save Error",description:e instanceof Error?e.message:"Failed to save changes.",variant:"destructive"})}},size:"lg",disabled:!p,className:(0,u.cn)("flex items-center gap-2",p&&"glow-button"),children:[(0,s.jsx)(eN.A,{className:"w-5 h-5"})," Save Changes"]})]})]})}function eH(e){let{courseName:r,lessonName:t}=e,a=t?"".concat(r," - ").concat(t):r;return(0,s.jsx)(eo,{courseName:a,loadingText:"Preparing the learning environment..."})}var eq=t(91721),eJ=t(85977);let eK=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(eJ.bL,{ref:r,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})});eK.displayName=eJ.bL.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(eJ._V,{ref:r,className:(0,u.cn)("aspect-square h-full w-full",t),...a})}).displayName=eJ._V.displayName;let eX=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(eJ.H4,{ref:r,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})});eX.displayName=eJ.H4.displayName;let eY=()=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-primary","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M12 2L14.5 9H21.5L15.5 13.5L18 21L12 16.5L6 21L8.5 13.5L2.5 9H9.5L12 2Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinejoin:"round"})}),eZ=e=>{var r;if("string"!=typeof e)return e;let t=e.split(/(\$\$[\s\S]*?\$\$|\$[\s\S]*?\$|```[\s\S]*?```|`[^`]+`|\*\*.*?\*\*|\*.*?\*|(?:\r\n|\r|\n))/g).filter(Boolean),a=[],n=null;t.forEach((e,r)=>{if(e.startsWith("$$")&&e.endsWith("$$")){n&&(a.push((0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 my-1",children:n},"list-".concat(r-1))),n=null);let t=e.slice(2,-2).trim();a.push((0,s.jsxs)("div",{className:"block my-2 p-2 border border-border/30 rounded bg-muted/20 overflow-x-auto text-center text-sm",children:[(0,s.jsx)("span",{children:t})," "]},r))}else if(e.startsWith("$")&&e.endsWith("$")){n&&(a.push((0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 my-1",children:n},"list-".concat(r-1))),n=null);let t=e.slice(1,-1).trim();a.push((0,s.jsx)("span",{className:"mx-1 px-1 py-0.5 bg-muted/30 rounded text-sm font-mono",children:t},r))}else if(e.startsWith("```")&&e.endsWith("```")){n&&(a.push((0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 my-1",children:n},"list-".concat(r-1))),n=null);let t=e.slice(3,-3).trim(),o=t.split("\n"),l=o[0].match(/^[a-z]+$/i)?o[0]:null,i=l?o.slice(1).join("\n"):t;a.push((0,s.jsxs)("pre",{className:"bg-muted/30 p-3 rounded-md my-2 overflow-x-auto text-xs font-mono border border-border/50 shadow-inner backdrop-blur-sm",children:[l&&(0,s.jsx)("code",{className:"block text-muted-foreground mb-1 text-xs",children:l}),(0,s.jsx)("code",{children:i.trim()})]},r))}else if(e.startsWith("`")&&e.endsWith("`")){n&&(a.push((0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 my-1",children:n},"list-".concat(r-1))),n=null);let t=e.slice(1,-1);a.push((0,s.jsx)("code",{className:"bg-muted/40 text-foreground px-1.5 py-0.5 rounded text-xs font-mono mx-0.5 border border-border/30",children:t},r))}else if(e.startsWith("**")&&e.endsWith("**")){n&&(a.push((0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 my-1",children:n},"list-".concat(r-1))),n=null);let t=e.slice(2,-2);a.push((0,s.jsx)("strong",{children:eZ(t)},r))}else if(e.startsWith("*")&&e.endsWith("*")){n&&(a.push((0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 my-1",children:n},"list-".concat(r-1))),n=null);let t=e.slice(1,-1);if(e.trim().startsWith("* ")&&!e.endsWith(" *")){let t=e.trim().substring(2);n||(n=[]),n.push((0,s.jsx)("li",{children:eZ(t)},r))}else a.push((0,s.jsx)("em",{children:eZ(t)},r))}else if(e.trim().startsWith("* ")){let t=e.trim().substring(2);n||(n=[]),n.push((0,s.jsx)("li",{children:eZ(t)},r))}else if(/^(\r\n|\r|\n)$/.test(e))n||a.push((0,s.jsx)("br",{},r));else{n&&(a.push((0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 my-1",children:n},"list-".concat(r-1))),n=null);let t=RegExp("(\\p{Emoji_Presentation}|\\p{Extended_Pictographic})","gu");t.test(e)?e.split(t).filter(e=>e).forEach((e,n)=>{e.match(t)?a.push((0,s.jsx)("span",{className:"text-lg inline-block mx-0.5 align-middle",children:e},"".concat(r,"-").concat(n))):a.push((0,s.jsx)("span",{children:e},"".concat(r,"-").concat(n)))}):a.push((0,s.jsx)("span",{children:e},r))}}),n&&a.push((0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 my-1",children:n},"list-end"));let o=[],l=[];return(a.forEach((e,r)=>{let t=null==e?void 0:e.type;if("div"===t||"pre"===t||"ul"===t||"br"===t){var a;l.length>0&&(o.push((0,s.jsx)("p",{className:"my-1",children:l},"p-".concat(r,"-prev"))),l=[]),"br"!==t?o.push(e):0===l.length&&o.length>0&&(null==(a=o[o.length-1])||a.type)}else l.push(e)}),l.length>0&&o.push((0,s.jsx)("p",{className:"my-1",children:l},"p-last")),1===o.length&&(null==(r=o[0])?void 0:r.type)==="p")?o[0].props.children:o};function eQ(e){let{message:r}=e;if(r.hidden)return null;let t="user"===r.sender,n="ai"===r.sender;return a.useId(),(0,s.jsxs)("div",{className:(0,u.cn)("flex items-start gap-2 md:gap-3 animate-fade-in",t?"justify-end":"justify-start"),children:[n&&(0,s.jsx)(eK,{className:"w-8 h-8 md:w-9 md:h-9 border-2 border-primary/40 shadow-lg bg-gradient-to-br from-primary/30 to-background/80 backdrop-blur-sm flex-shrink-0 transform transition-transform duration-300 hover:scale-110",children:(0,s.jsx)(eX,{className:"text-primary bg-transparent",children:(0,s.jsx)(eY,{})})}),(0,s.jsx)("div",{className:(0,u.cn)("max-w-[85%] sm:max-w-[80%] rounded-xl px-3 py-2 md:px-4 md:py-2.5 shadow-lg transition-all duration-300 transform-gpu hover:scale-[1.02] hover:shadow-primary/20",t?"bg-primary text-primary-foreground rounded-br-sm":"bg-gradient-to-br from-secondary/90 to-card/80 text-card-foreground rounded-bl-sm border border-border/50 backdrop-blur-sm",n?"ai-message-glow":""),children:(0,s.jsx)("div",{className:"text-sm break-words leading-relaxed whitespace-pre-wrap",children:eZ(r.text)})}),t&&(0,s.jsx)(eK,{className:"w-8 h-8 md:w-9 md:h-9 border border-muted/50 shadow-md bg-background/80 backdrop-blur-sm flex-shrink-0 transform transition-transform duration-300 hover:scale-110",children:(0,s.jsx)(eX,{className:"text-muted-foreground bg-transparent",children:(0,s.jsx)(eq.A,{className:"w-4 h-4 md:w-5 md:h-5"})})})]})}var e0=t(99274),e1=t(87687),e2=t(53797);let e5=e2.bL,e4=e2.l9,e3=a.forwardRef((e,r)=>{let{className:t,align:a="center",sideOffset:n=4,...o}=e;return(0,s.jsx)(e2.ZL,{children:(0,s.jsx)(e2.UC,{ref:r,align:a,sideOffset:n,className:(0,u.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o})})});e3.displayName=e2.UC.displayName;let e8=["\uD83D\uDE00","\uD83D\uDE02","\uD83D\uDE0A","\uD83D\uDE0D","\uD83E\uDD14","\uD83D\uDC4D","\uD83C\uDF89","\uD83D\uDCA1","\uD83D\uDCDA","\uD83D\uDE80","✨","\uD83E\uDDE0","\uD83E\uDDD1‍\uD83C\uDF93","\uD83C\uDFAF","\uD83D\uDE15"],e9=a.forwardRef((e,r)=>{let{onSubmit:t,disabled:n=!1,placeholder:o="Send a message...",className:l,...i}=e,[d,m]=(0,a.useState)(""),x=e=>{m(r=>r+e),r&&"current"in r&&r.current&&r.current.focus()};return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&!n&&(t(d.trim()),m(""))},className:(0,u.cn)("flex items-center gap-2 border-t border-border p-2 md:p-3 bg-background",l),children:[(0,s.jsxs)(e5,{children:[(0,s.jsx)(e4,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"ghost",size:"icon",type:"button",className:"text-muted-foreground hover:text-primary w-8 h-8 md:w-9 md:h-9",disabled:n,children:[" ",(0,s.jsx)(e0.A,{className:"w-4 h-4 md:w-5 md:h-5"})," ",(0,s.jsx)("span",{className:"sr-only",children:"Add emoji"})]})}),(0,s.jsx)(e3,{className:"w-auto p-2 grid grid-cols-5 gap-1 bg-popover border-popover shadow-lg",children:e8.map(e=>(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>x(e),className:"text-lg md:text-xl hover:bg-accent w-8 h-8 md:w-9 md:h-9",children:e},e))})]}),(0,s.jsx)(A,{ref:r,type:"text",value:d,onChange:e=>m(e.target.value),placeholder:o,disabled:n,className:"flex-1 h-9 md:h-10 bg-input border-input focus-visible:ring-primary focus-visible:ring-offset-0","aria-label":"Chat message input",...i}),(0,s.jsxs)(c.$,{type:"submit",disabled:n||!d.trim(),size:"icon",className:"bg-primary hover:bg-primary/90 text-primary-foreground w-8 h-8 md:w-9 md:h-9",children:[" ",(0,s.jsx)(e1.A,{className:"w-4 h-4 md:w-5 md:h-5"})," ",(0,s.jsx)("span",{className:"sr-only",children:"Send message"})]})]})});e9.displayName="ChatInput";let e6=(0,x.createServerReference)("40694a7f7b72183cb139d51b7db1554dda969b523a",x.callServer,void 0,x.findSourceMapURL,"tutorLearnerAction"),e7=(0,x.createServerReference)("40e74c92dc9ffd0d6640d6741db2ab0fcc8a23dab0",x.callServer,void 0,x.findSourceMapURL,"generateLearningGoalAction"),re=(0,a.forwardRef)((e,r)=>{let{initialCourseName:t,initialLessonName:o,initialContentSummary:l,initialLearnerName:d,messages:c,setMessages:m,addMessage:x,onSetupComplete:h,isGeneratingVideo:p}=e,[g,f]=(0,a.useState)({courseName:t,lessonName:o,learnerName:d||"",instructionGoal:"",learningGoal:"",contentSummary:l}),[b,v]=(0,a.useState)(d?"awaiting_goal":"awaiting_name"),[j,y]=(0,a.useState)(!1),N=(0,a.useRef)(null),w=(0,a.useRef)(null),{toast:S}=(0,i.dj)();(0,a.useEffect)(()=>{let e=setTimeout(()=>{var e;null==(e=N.current)||e.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(e)},[c]),(0,a.useEffect)(()=>{("awaiting_name"===b||"awaiting_goal"===b||"goal_generated"===b||"tutoring"===b)&&!j&&w.current&&w.current.focus()},[b,j]);let k=()=>{x("ai",(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 animate-spin text-primary"}),(0,s.jsx)("span",{children:"Rookie & Pookie is thinking..."})]}))},C=(0,a.useCallback)(()=>{m(e=>{let r=[...e].reverse().findIndex(e=>{var r,t,s;return!e.hidden&&"ai"===e.sender&&a.isValidElement(e.text)&&"div"===e.text.type&&(null==(s=e.text.props)||null==(t=s.children)||null==(r=t[0])?void 0:r.type)===n.A});if(-1!==r){let t=e.length-1-r;return[...e.slice(0,t),...e.slice(t+1)]}return e})},[m]),A=(0,a.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(j&&!r){console.warn("Already processing a chat response. Ignoring new visible input."),S({title:"Processing...",description:"Rookie & Pookie is thinking, please wait.",variant:"default"});return}console.log("Handling input. Is hidden: ".concat(r,", isLoading: ").concat(j,", Current Stage: ").concat(b)),(!r||e.startsWith("<<Unstop>>"))&&x(r?"system":"user",e,r);let t=b,s=b,a=null,n={...g};r||(y(!0),k());try{if("goal_generated"===t&&(console.log("Already in 'goal_generated', transitioning to 'tutoring' for processing."),t="tutoring"),"tutoring"===t){var o,l;console.log("Processing 'tutoring' stage input.");let t=c.concat(r?[]:[{id:"temp-current-".concat(Date.now()),sender:"user",text:e,timestamp:Date.now()}]).filter(e=>"string"==typeof e.text&&"system"!==e.sender).map(e=>({role:"user"===e.sender?"user":"ai",text:e.text}));if(!n.contentSummary)throw Error("Content summary is missing in form data.");let a={courseName:n.courseName,lessonName:n.lessonName,learnerName:n.learnerName||"Learner",learningGoal:n.learningGoal||n.instructionGoal||"Complete the lesson",contentSummary:n.contentSummary,userInput:e,chatHistory:t};console.log("--- TUTOR BOT INPUT (Pre-Action) ---"),console.log("Course:",a.courseName),console.log("Lesson:",a.lessonName),console.log("Learner:",a.learnerName),console.log("Goal:",a.learningGoal),console.log("User Input:",a.userInput),console.log("Content Summary Provided:",!!a.contentSummary),console.log("Chat History Length:",null!=(l=null==(o=a.chatHistory)?void 0:o.length)?l:0),console.log("--------------------------------------");let i=await e6(a);if(r||C(),i.success&&i.data){let e=i.data.response.trim();"TraiHVail Activated"!==e&&"TraiHVail Updated!"!==e?x("ai",e):console.log("Received '".concat(e,"', hiding AI response.")),s="tutoring"}else console.error("Tutor Action Error:",i.error,i.errors),r||(x("ai","Hmm, my circuits got a bit tangled. Could you rephrase that? \uD83D\uDE15"),S({title:"Tutoring Error",description:i.error||"Couldn't get a response from the tutor.",variant:"destructive"})),s="tutoring";v(s)}else{switch(console.log("Processing setup stage: ".concat(t)),t){case"awaiting_name":n.learnerName=e,f(n),s="awaiting_goal",a="Nice to meet you, ".concat(e,"! What's your main goal or question for this lesson (\"").concat(n.lessonName,'")? \uD83E\uDD14'),r||C();break;case"awaiting_goal":n.instructionGoal=e,f(n);let o=await e7({courseName:n.courseName,lessonName:n.lessonName,learnerName:n.learnerName||"Learner",instructionGoal:n.instructionGoal});r||C(),o.success&&o.data?(n.learningGoal=o.data.learningGoal,f(n),x("ai","Alright, ".concat(n.learnerName||"there","! Based on that, here's a refined goal: **").concat(o.data.learningGoal,"** \uD83C\uDFAF")),a="Okay, goal set! Click the 'Generate Video' button for a visual overview, or start asking questions! ✨",s="goal_generated",console.log("Setup complete, calling onSetupComplete."),h()):(console.error("Goal Generation Error:",o.error,o.errors),r||(x("ai","Oops! I had a little glitch refining your goal. Could you tell me what you want to focus on again?"),S({title:"Goal Generation Failed",description:o.error||"Couldn't generate learning goal.",variant:"destructive"})),s="awaiting_goal");break;default:r||C(),console.warn("Reached default case in handleUserInput during setup stage:",t),r||(a="How can I help you today?"),s="tutoring"}v(s),a&&setTimeout(()=>{x("ai",a),!r&&w.current&&("awaiting_goal"===s||"goal_generated"===s)&&w.current.focus()},100)}}catch(e){if(!r)try{C()}catch(e){}console.error("Error handling user input:",e),r||(x("ai","Apologies, I encountered an unexpected issue. Let's try again. \uD83D\uDE15"),S({title:"Unexpected Error",description:e instanceof Error?e.message:"An unknown error occurred.",variant:"destructive"})),v("processing_goal"===b?"awaiting_goal":"processing_tutor"===b?"tutoring":"goal_generated"===b?"awaiting_goal":"awaiting_name"),!r&&w.current&&setTimeout(()=>{var e;return null==(e=w.current)?void 0:e.focus()},50)}finally{r?console.log("Finished processing hidden message."):(y(!1),w.current&&("tutoring"===s||"awaiting_goal"===s||"awaiting_name"===s||"goal_generated"===s)&&setTimeout(()=>{var e;return null==(e=w.current)?void 0:e.focus()},50))}},[j,b,g,c,x,m,S,h,C]);return(0,a.useImperativeHandle)(r,()=>({simulateUserInput(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];A(e,r)}}),[A]),(0,s.jsxs)("div",{className:(0,u.cn)("flex flex-col h-full bg-card/80 backdrop-blur-md rounded-lg shadow-2xl shadow-primary/10 border border-primary/20 overflow-hidden","transform-style-3d transition-transform duration-500 hover:rotate-x-5 hover:rotate-y-1"),children:[(0,s.jsx)("div",{className:"absolute inset-0 z-0 overflow-hidden opacity-10 pointer-events-none",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-grid-pattern animate-grid-scroll"})}),(0,s.jsx)(ef,{className:"relative z-10 flex-1 w-full overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-3 md:p-4 space-y-4",children:[" ",c.filter(e=>!e.hidden).map(e=>(0,s.jsx)(eQ,{message:e},e.id)),(0,s.jsx)("div",{ref:N})]})}),(0,s.jsxs)("div",{className:"relative z-10 mt-auto border-t border-border/20",children:[" ",(0,s.jsx)(e9,{ref:w,onSubmit:e=>A(e,!1),disabled:j,placeholder:(()=>{if(j)return"Rookie & Pookie is thinking...";switch(b){case"awaiting_name":return"Enter your name...";case"awaiting_goal":return'What about "'.concat(g.lessonName,'" interests you most?');case"goal_generated":return"Click 'Generate Video' or ask about \"".concat(g.learningGoal||g.lessonName,'"...');case"tutoring":return'Ask about "'.concat(g.learningGoal||g.lessonName,'"...');case"processing_goal":case"processing_tutor":return"Processing...";case"error":return"An error occurred. Try sending a message again.";default:return"Send a message..."}})()})]})]})});re.displayName="ChatInterface";let rr=e=>{let{videoUrl:r}=e;return r?(0,s.jsx)("div",{className:"w-full max-w-full aspect-video bg-black rounded-lg overflow-hidden shadow-lg",children:(0,s.jsxs)("video",{controls:!0,className:"w-full h-full object-contain",children:[(0,s.jsx)("source",{src:r,type:"video/mp4"}),"Your browser does not support the video tag."]})}):(0,s.jsx)("p",{className:"text-muted-foreground text-center",children:"No video available."})};function rt(e){let{courseName:r,lessonName:t,contentSummary:o,learnerName:l,messages:i,setMessages:d,addMessage:m,chatInterfaceRef:x,onSetupComplete:h,isChatSetupComplete:p,videoPanelState:g,videoUrl:f,videoError:v,isGeneratingVideo:y,videoGenerationDuration:N,onBack:w,onGenerateVideo:S,generatedSlidesCount:k,onRegenerateVideo:C,onDownloadVideo:A}=e;return(0,s.jsxs)("div",{className:"w-full h-full flex flex-col md:flex-row bg-gradient-to-br from-background via-background/95 to-secondary/10",children:[(0,s.jsxs)("div",{className:(0,u.cn)("w-full h-full flex flex-col p-2 md:p-4 border-r border-border/20 transition-all duration-700 ease-in-out",p?"md:w-1/2 lg:w-1/3":"md:w-full"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2 md:mb-4 flex-shrink-0 px-2",children:[(0,s.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-primary header-glow",children:"TraiHVail Assistant"}),(0,s.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:w,children:[(0,s.jsx)(b.A,{className:"mr-1 md:mr-2 h-4 w-4"}),(0,s.jsx)("span",{className:"hidden md:inline",children:"Back to Slides"})]})]}),(0,s.jsxs)("h2",{className:"text-base md:text-lg text-muted-foreground mb-2 text-center flex-shrink-0",children:[r," - ",t]}),(0,s.jsx)("div",{className:"flex-grow overflow-hidden relative",children:(0,s.jsx)(re,{ref:x,initialCourseName:r,initialLessonName:t,initialContentSummary:o,initialLearnerName:l,messages:i,setMessages:d,addMessage:m,onSetupComplete:h,isGeneratingVideo:y})})]}),(0,s.jsxs)("div",{className:(0,u.cn)("h-full flex flex-col items-center justify-center p-4 md:p-6 relative overflow-hidden transition-all duration-700 ease-in-out",p?"w-full md:w-1/2 lg:w-2/3":"w-0 md:w-0",!p&&"opacity-0 pointer-events-none"),children:[(0,s.jsx)("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-grid-pattern animate-grid-scroll animation-delay-500ms"})}),"idle"===g&&(0,s.jsxs)("div",{className:"text-center z-10 animate-fade-in",children:[(0,s.jsx)("h3",{className:"text-lg md:text-xl text-muted-foreground mb-6",children:"Ready to visualize the lesson?"}),(0,s.jsxs)(c.$,{onClick:S,size:"lg",variant:"secondary",className:"glow-button relative overflow-hidden group",disabled:y,children:[(0,s.jsxs)("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:[(0,s.jsx)("span",{className:"absolute inset-0 translate-x-0 translate-y-0 bg-primary transition-transform duration-500 ease-out group-hover:translate-x-full group-hover:translate-y-full"}),(0,s.jsx)("span",{className:"absolute inset-0 translate-x-full translate-y-full bg-primary/80 transition-transform duration-500 ease-out group-hover:translate-x-0 group-hover:translate-y-0"})]}),(0,s.jsxs)("span",{className:"relative z-10 flex items-center",children:[(0,s.jsx)(j.A,{className:"mr-2 h-5 w-5 group-hover:animate-pulse"}),"Generate Course Video"]})]})]}),"generating_video"===g&&(0,s.jsx)(eo,{courseName:"Lesson: ".concat(t),loadingText:"Generating video... ",itemCount:k,countdownDuration:N}),"video_ready"===g&&f&&(0,s.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center animate-fade-in z-10",children:[(0,s.jsx)("h3",{className:"text-lg md:text-xl text-muted-foreground mb-4",children:"Lesson Video"}),(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(n.A,{className:"h-8 w-8 animate-spin text-primary"}),children:(0,s.jsx)(rr,{videoUrl:f})}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)(c.$,{onClick:C,variant:"outline",disabled:y,children:"Generate New Video"}),(0,s.jsxs)(c.$,{onClick:A,size:"lg",className:"glow-button",disabled:y,children:[(0,s.jsx)(j.A,{className:"mr-2 h-5 w-5"})," Download Video"]})]})]}),"video_error"===g&&(0,s.jsxs)("div",{className:"w-full max-w-md text-center z-10 animate-fade-in",children:[(0,s.jsx)("h3",{className:"text-xl md:text-2xl font-semibold text-destructive mb-4",children:"Video Generation Failed"}),(0,s.jsx)("p",{className:"text-destructive-foreground mb-6 px-2",children:v||"An unknown error occurred."}),(0,s.jsx)(c.$,{onClick:C,variant:"outline",disabled:y,children:"Try Again?"})]})]})]})}function rs(e){let{onBack:r,message:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center p-6 animate-fade-in",children:[(0,s.jsx)(eW.A,{className:"w-16 h-16 text-destructive mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6 max-w-md",children:t||"An unexpected error occurred or the state is invalid."}),(0,s.jsx)(c.$,{onClick:r,variant:"outline",className:"mt-4",children:"Go Back"})]})}function ra(){let{user:e,logout:r}=(0,a.useContext)(m.c),[t,x]=(0,a.useState)("landing"),[f,b]=(0,a.useState)(!1),[v,j]=(0,a.useState)(""),[y,N]=(0,a.useState)([]),[S,k]=(0,a.useState)(null),[C,A]=(0,a.useState)(null),[E,_]=(0,a.useState)(null),L=(0,a.useRef)(null),{toast:R}=(0,i.dj)(),[I,F]=(0,a.useState)("hidden"),[T,z]=(0,a.useState)(null),[D,M]=(0,a.useState)(null),[P,V]=(0,a.useState)(null),[G,U]=(0,a.useState)(!1),$=(0,a.useRef)(!1),[W,O]=(0,a.useState)([]);(0,a.useEffect)(()=>{b(!0),e||"landing"===t||"login"===t||"launching"===t||(x("landing"),q())},[e,t]),(0,a.useEffect)(()=>{"learning_view"!==t&&(F("hidden"),z(null),M(null),V(null),U(!1),$.current=!1,O([]))},[t]);let B=()=>{e?(x("launching"),setTimeout(()=>x("setup"),2e3)):x("login")},H=()=>{x("launching"),setTimeout(()=>x("setup"),2e3)},q=()=>{j(""),N([]),k(null),A(null),_(null)},J=()=>{x("landing"),q()},K=()=>{x("structure"),k(null),A(null),_(null)},Z=()=>{x("slides")},Q=()=>{if(!C)return void R({title:"Error",description:"No slides available to edit.",variant:"destructive"});x("editing_slides")},ee=e=>{A(e),x("slides"),R({title:"Success",description:"Slide structure updated.",variant:"default"})},er=()=>{x("slides")},et=(0,a.useCallback)(function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];O(s=>{let a={id:"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),sender:e,text:r,timestamp:Date.now(),hidden:t},n=a.id,o=0;for(;s.some(e=>e.id===n)&&o<10;)n="".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9),"-").concat(o),o++;return a.id=n,[...s,a]})},[]),ea=e=>{if(console.log("--- Starting Data Parsing ---"),console.log("Raw data row count:",e.length),e.length<2)return console.warn("Data has less than 2 rows (Header + Data). Cannot parse structure."),[];let r=e[0].map(e=>(null==e?void 0:e.toString().trim().toLowerCase())||"");console.log("Detected Headers (lowercase, trimmed):",r);let t=r.indexOf("content"),s=r.indexOf("type"),a=r.indexOf("details");if(-1===t||-1===s)return console.error("Required headers 'content' or 'type' not found in:",r),R({title:"Parsing Error",description:"Required headers 'Content' or 'Type' not found. Please check the file.",variant:"destructive",duration:8e3}),[];console.log("Column indexes -> Content: ".concat(t,", Type: ").concat(s,", Details: ").concat(-1!==a?a:"Not Found"));let n=e.slice(1).map((e,r)=>{var n,o,l;let i=r+2;if(!e||0===e.length||e.every(e=>null==e||""===e))return console.warn("[Row ".concat(i,"] Skipping: Row appears empty.")),null;let d=Math.max(t,s,-1===a?-1:a);if(e.length<=d)return console.warn("[Row ".concat(i,"] Skipping: Row has fewer columns (").concat(e.length,") than required. Needs at least ").concat(d+1," columns for Content/Type").concat(-1!==a?"/Details":"",".")),null;let c=null==(n=e[t])?void 0:n.toString().trim(),u=null==(o=e[s])?void 0:o.toString().trim(),m=-1!==a&&(null==(l=e[a])?void 0:l.toString().trim())||"",x=null,h=null==u?void 0:u.toLowerCase().replace(/[-\s]+/g,"");if("module"===h?x="Module":"submodule"===h&&(x="Sub Module"),!c)return console.warn("[Row ".concat(i,"] Skipping: Missing or empty 'Content'. Value was: '").concat(e[t],"'")),null;if(!x)return console.warn("[Row ".concat(i,"] Skipping: Invalid or missing 'Type'. Expected 'Module' or 'Sub Module' (case-insensitive, space/hyphen optional), got '").concat(u,"'. Normalized: '").concat(h,"'")),null;let p={id:"".concat(x.replace(" ",""),"-").concat(r,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),content:c,type:x,details:m,completed:!1};return console.log("[Row ".concat(i,"] Parsed: Type='").concat(x,"', Content='").concat(c,"', Details='").concat(m?"Yes":"No","'")),p}).filter(e=>null!==e);return(console.log("\n--- Parsing Finished ---"),console.log("Total valid modules/sub-modules parsed:",n.length),0===n.length&&e.length>1)?(console.error("No valid Module or Sub Module rows found after parsing. Check data rows and headers."),R({title:"Parsing Issue",description:"No valid 'Module' or 'Sub Module' rows found. Please check the 'Type' column and ensure 'Content' is not empty.",variant:"destructive",duration:8e3}),[]):n},en=(e,r)=>{if(j(e),x("parsing"),N([]),!r){R({title:"File Error",description:"No file was selected.",variant:"destructive"}),x("setup");return}let t=new FileReader;t.onload=e=>{try{var t;let s=null==(t=e.target)?void 0:t.result;if(!s)throw Error("Failed to read file data.");let a=[],n=r.type,o=r.name.toLowerCase();if(n.includes("csv")||o.endsWith(".csv")){console.log("Parsing CSV file...");let e=new TextDecoder("utf-8").decode(s),r=65279===e.charCodeAt(0)?e.substring(1):e,t=d.LF(r,{type:"string",raw:!1}),n=t.SheetNames[0];if(!n)throw Error("Could not process CSV data (No sheet found).");let o=t.Sheets[n],l=d.Wp.sheet_to_json(o,{header:1,defval:"",raw:!1});if(!l||0===l.length)throw Error("CSV file appears empty or could not be parsed.");a=ea(l)}else if(n.includes("spreadsheetml")||n.includes("ms-excel")||o.endsWith(".xlsx")||o.endsWith(".xls")){console.log("Parsing Excel file...");let e=d.LF(s,{type:"array"}),r=e.SheetNames[0];if(!r)throw Error("Could not find any sheets in the Excel file.");let t=e.Sheets[r];if(!t)throw Error('Sheet "'.concat(r,'" could not be accessed.'));let n=d.Wp.sheet_to_json(t,{header:1,defval:"",raw:!1});if(!n||0===n.length)throw Error("Excel sheet appears empty or could not be parsed.");a=ea(n)}else throw Error("Unsupported file type. Please upload an Excel (.xlsx, .xls) or CSV (.csv) file.");a.length>0?(console.log("Successfully parsed ".concat(a.length," modules/sub-modules.")),N(a),setTimeout(()=>x("structure"),500)):(console.log("Parsing resulted in empty structure, returning to setup."),setTimeout(()=>x("setup"),500))}catch(e){console.error("Error processing file:",e),R({title:"Processing Error",description:e instanceof Error?e.message:"Failed to process the file.",variant:"destructive",duration:7e3}),x("setup")}},t.onerror=e=>{console.error("Error reading file:",e),R({title:"File Reading Error",description:"Could not read the selected file.",variant:"destructive"}),x("setup")},t.readAsArrayBuffer(r)},eo=async e=>{if("Sub Module"!==e.type)return void R({title:"Information",description:"AI features are available for Sub Modules.",variant:"default"});k({name:e.content,type:e.type,description:e.details}),A(null),_(null),x("generating_slides");try{var r,t,s;let a=await h({submoduleName:e.content,submoduleDescription:e.details});if(a.success&&(null==(r=a.data)?void 0:r.slides)&&a.data.slides.length>0)console.log("Generated ".concat(a.data.slides.length," slides successfully.")),A(a.data.slides),x("slides");else{let e=a.error||(null==(s=a.errors)||null==(t=s[0])?void 0:t.message)||"Slide generation returned no slides or an unknown error.";throw Error(e)}}catch(r){let e=r instanceof Error?r.message:"Unknown slide generation error.";console.error("Slide Generation Error:",e,r),R({title:"Slide Generation Failed",description:e,variant:"destructive",duration:7e3}),x("structure")}},ei=async()=>{if(!S||!v||!C){R({title:"Error",description:"Missing required data (lesson, course name, or slides).",variant:"destructive"}),console.error("Missing data for Learning View:",{selectedLesson:S,courseName:v,generatedSlides:!!C}),C?x("slides"):y.length>0?x("structure"):x("setup");return}x("summarizing_content");try{var r;let t=await p({slides:C,submoduleName:S.name});if(t.success&&(null==(r=t.data)?void 0:r.summary)){console.log("Content summarized successfully."),_(t.data.summary);let r=(null==e?void 0:e.fullName)||"",s=ed(v,S.name,t.data.summary,r);O(s),x("learning_view")}else throw Error(t.error||"Content summarization failed or returned empty summary.")}catch(e){console.error("Error summarizing content:",e),R({title:"Content Summarization Failed",description:e instanceof Error?e.message:"Unknown error.",variant:"destructive"}),x("slides")}},ed=(e,r,t,s)=>{let a=[{id:"system-summary-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),sender:"system",text:t,timestamp:Date.now(),hidden:!0}];return s?a.push({id:"ai-intro-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),sender:"ai",text:"Hey ".concat(s.split(" ")[0],"! I'm Rookie & Pookie, ready to help with **").concat(r,"** in **").concat(e,"**. What's your main goal or question for this lesson? \uD83E\uDD14"),timestamp:Date.now(),hidden:!1}):a.push({id:"ai-intro-name-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),sender:"ai",text:"Hey there! I'm Rookie & Pookie, ready to help with **".concat(r,"** in **").concat(e,"**. What name do you go by? \uD83E\uDDD1‍\uD83C\uDF93"),timestamp:Date.now(),hidden:!1}),a},ec=()=>{console.log("Chat setup complete, showing video panel."),U(!0),F("idle")},eu=async()=>{if(!C||0===C.length){R({title:"Error",description:"Slide data is not available to generate video.",variant:"destructive"}),F("idle");return}if($.current)return void R({title:"In Progress",description:"Video generation is already running.",variant:"default"});F("generating_video"),z(null),M(null);let e=Math.max(10,4*C.length);V(e),$.current=!0;let r="The video generation process has begun! It will take approximately ".concat(e," seconds.");console.log("Simulating hidden system input for video generation start:",r),L.current?L.current.simulateUserInput(r,!0):console.warn("ChatInterface ref not available to send video generation system message."),g({slides:C}).then(e=>{if(e.success&&e.videoUrl)console.log("Video Generation Successful:",e.videoUrl?"URL received":"No URL"),z(e.videoUrl),F("video_ready"),L.current&&L.current.simulateUserInput("Video generation complete.",!0);else{console.error("Video Generation Action Error:",e.error);let r=e.error||"Failed to generate video. The process may have timed out or encountered an error.";M(r),F("video_error"),R({title:"Video Generation Failed",description:r,variant:"destructive",duration:1e4});let t="Video generation failed: ".concat(r);L.current&&L.current.simulateUserInput(t,!0)}}).catch(e=>{console.error("Exception during video generation process:",e);let r=e instanceof Error?e.message:"An unknown error occurred during video generation.";if(r.includes("command not found")||r.includes("/usr/bin/env: python3:")||r.includes("no such file or directory")){let e="Could not find 'python3' command or required dependencies. Ensure Python 3 and necessary libraries (moviepy, Wand, etc.) are installed and in your system's PATH for video generation.";M(e),R({title:"Python/Dependency Error",description:e,variant:"destructive",duration:1e4});let r="Video generation error: ".concat(e);L.current&&L.current.simulateUserInput(r,!0)}else{M(r),R({title:"Video Generation Error",description:r,variant:"destructive",duration:1e4});let e="Video generation error: ".concat(r);L.current&&L.current.simulateUserInput(e,!0)}F("video_error")}).finally(()=>{$.current=!1,V(null),console.log("Video generation process finished (or failed).")}),console.log("Video generation started in the background.")};if(!f)return(0,s.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-12 bg-background",children:(0,s.jsx)(n.A,{className:"h-16 w-16 animate-spin text-primary"})});let em=["learning_view","editing_slides"].includes(t),ex=(0,u.cn)("flex flex-col items-center perspective overflow-hidden","pt-16",em?"w-full h-screen p-0 justify-start":"min-h-screen p-4 md:p-8 lg:p-12 justify-center","landing"===t?"p-0 md:p-0 lg:p-0 pt-16":""),eh=(0,u.cn)("relative w-full transition-all duration-700 ease-in-out",em?"h-full max-w-none":"max-w-lg","landing"===t&&"max-w-none",("structure"===t||"slides"===t||"generating_slides"===t||"summarizing_content"===t)&&"max-w-4xl","parsing"===t&&"max-w-2xl");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"fixed top-0 left-0 right-0 h-16 bg-background/80 backdrop-blur-lg border-b border-border/30 z-50 flex items-center justify-between px-4 md:px-6 shadow-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("img",{src:"https://d8it4huxumps7.cloudfront.net/uploads/images/unstop/branding-guidelines/logos/white/Unstop-Logo-White-Large.png",alt:"Unstop Logo",className:"h-8 w-auto"})}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-sm text-muted-foreground hidden sm:inline",children:["Welcome, ",e.fullName.split(" ")[0],"!"]}),(0,s.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:()=>{r(),x("landing"),q()},children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Logout"]})]}):"login"!==t&&"landing"!==t&&(0,s.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:()=>x("login"),children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4"})," Login"]})})]}),(0,s.jsx)("main",{className:ex,children:(0,s.jsx)("div",{className:eh,children:(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center h-[85vh]",children:(0,s.jsx)(n.A,{className:"h-16 w-16 animate-spin text-primary"})}),children:(()=>{if(!e&&"landing"!==t&&"login"!==t&&"launching"!==t)return(0,s.jsx)(X,{onLoginSuccess:H,onBack:J});switch(t){case"landing":return(0,s.jsx)(w,{onStart:B});case"login":return(0,s.jsx)(X,{onLoginSuccess:H,onBack:J});case"launching":return(0,s.jsx)(Y,{});case"setup":return(0,s.jsx)(es,{onSubmit:en,onBack:J});case"parsing":return(0,s.jsx)(el,{courseName:v});case"structure":return(0,s.jsx)(ev,{courseName:v,modules:y,onStartLesson:eo,onBack:J});case"generating_slides":return(0,s.jsx)(ej,{courseName:v,lessonName:null==S?void 0:S.name});case"slides":return(0,s.jsx)(eU,{courseName:v,lessonName:null==S?void 0:S.name,slides:C,onBack:K,onEdit:Q,onLaunchLearning:ei});case"editing_slides":if(!C)return(0,s.jsx)(rs,{onBack:K,message:"No slides to edit."});return(0,s.jsx)(eB,{initialSlides:C,onSave:ee,onCancel:er,courseName:v,lessonName:null==S?void 0:S.name});case"summarizing_content":return(0,s.jsx)(eH,{courseName:v,lessonName:null==S?void 0:S.name});case"learning_view":var r;if(!S||!v||!E)return console.error("Missing data for learning view, returning to structure."),C?x("slides"):y.length>0?x("structure"):x("setup"),R({title:"Error",description:"Could not load learning environment data.",variant:"destructive"}),null;return(0,s.jsx)(rt,{courseName:v,lessonName:S.name,contentSummary:E,learnerName:(null==e?void 0:e.fullName)||"",messages:W,setMessages:O,addMessage:et,chatInterfaceRef:L,onSetupComplete:ec,isChatSetupComplete:G,videoPanelState:I,videoUrl:T,videoError:D,isGeneratingVideo:$.current,videoGenerationDuration:P,onBack:Z,onGenerateVideo:eu,generatedSlidesCount:null!=(r=null==C?void 0:C.length)?r:0,onRegenerateVideo:()=>F("idle"),onDownloadVideo:()=>{if(T&&T.startsWith("data:")){let e=document.createElement("a");e.href=T,e.download="".concat(v.replace(/[^a-zA-Z0-9]/g,"_"),"_").concat(S.name.replace(/[^a-zA-Z0-9]/g,"_"),"_video.mp4"),document.body.appendChild(e),e.click(),document.body.removeChild(e),R({title:"Downloading...",description:"Video download started. Large files may take time."})}else T&&window.open(T,"_blank")}});default:return(0,s.jsx)(rs,{onBack:J,message:"An unexpected application error occurred."})}})()})})})]})}},30285:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(95155),a=t(12115),n=t(99708),o=t(74466),l=t(59434);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg focus-visible:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow-md focus-visible:shadow-md",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-md focus-visible:shadow-md",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md focus-visible:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:o,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(i({variant:a,size:o,className:t})),ref:r,...c})});d.displayName="Button"},32383:()=>{},59434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(52596),a=t(39688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},59576:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>o,c:()=>n});var s=t(95155),a=t(12115);let n=(0,a.createContext)({user:null,login:async()=>{},logout:()=>{},isLoading:!0}),o=e=>{let{children:r}=e,[t,o]=(0,a.useState)(null),[l,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("traihvailUser");if(e)try{o(JSON.parse(e))}catch(e){console.error("Failed to parse stored user data:",e),localStorage.removeItem("traihvailUser")}i(!1)},[]);let d=async(e,r)=>(i(!0),console.log("Simulating login for:",e),new Promise(r=>{setTimeout(()=>{let t={id:"user-".concat(Date.now()),fullName:e.trim()};o(t),localStorage.setItem("traihvailUser",JSON.stringify(t)),i(!1),console.log("Login simulation successful"),r()},1e3)}));return(0,s.jsx)(n.Provider,{value:{user:t,login:d,logout:()=>{o(null),localStorage.removeItem("traihvailUser"),console.log("User logged out")},isLoading:l},children:r})}},60550:(e,r,t)=>{Promise.resolve().then(t.bind(t,29273))},83686:()=>{},87481:(e,r,t)=>{"use strict";t.d(r,{dj:()=>m});var s=t(12115);let a=0,n=new Map,o=e=>{if(n.has(e))return;let r=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,r)},l=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?o(t):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},i=[],d={toasts:[]};function c(e){d=l(d,e),i.forEach(e=>{e(d)})}function u(e){let{...r}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=s.useState(d);return s.useEffect(()=>(i.push(r),()=>{let e=i.indexOf(r);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var r=r=>e(e.s=r);e.O(0,[524,668,21,655,441,684,358],()=>r(60550)),_N_E=e.O()}]);